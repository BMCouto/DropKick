/*! DropKick: https://github.com/JamieLottering/DropKick */
(function(b,f,l){var c=false;if(b.browser.msie&&b.browser.version.substr(0,1)<7){c=true}else{l.documentElement.className=l.documentElement.className+" dk_fouc"}var p={},r=[],n={left:37,up:38,right:39,down:40,enter:13},e=['<div class="dk_container" id="dk_container_{{ id }}" tabindex="{{ tabindex }}">','<a class="dk_toggle">','<span class="dk_label">{{ label }}</span>',"</a>",'<div class="dk_options">','<ul class="dk_options_inner">',"</ul>","</div>","</div>"].join(""),h='<li class="{{ current }}"><a data-dk-dropdown-value="{{ value }}">{{ text }}</a></li>',i={startSpeed:1000,theme:false,change:b.noop,onRender:b.noop};p.init=function(s){s=b.extend({},i,s);return this.each(function(){var v=b(this),B=v.find(":selected").first(),A=v.find("option"),z=v.data("dropkick")||{},t=v.attr("id")||v.attr("name"),u=s.width||v.outerWidth(),w=v.attr("tabindex")?v.attr("tabindex"):"",x=false,y;if(z.id){return v}else{z.settings=s;z.tabindex=w;z.id=t;z.$original=B;z.$select=v;z.value=d(v.val())||d(B.attr("value"));z.label=B.text();z.options=A}x=a(e,z);x.find(".dk_toggle").css({width:u+"px"});v.before(x);x=b("#dk_container_"+t).fadeIn(s.startSpeed);y=s.theme?s.theme:"default";x.addClass("dk_theme_"+y);z.theme=y;z.$dk=x;v.data("dropkick",z);x.data("dropkick",z);r[r.length]=v;x.bind("focus.dropkick",function(C){x.addClass("dk_focus")}).bind("blur.dropkick",function(C){x.removeClass("dk_open dk_focus")});setTimeout(function(){v.hide()},0)})};p.theme=function(w){var t=b(this),u=t.data("dropkick"),s=u.$dk,v="dk_theme_"+u.theme;s.removeClass(v).addClass("dk_theme_"+w);u.theme=w};p.reset=function(){for(var u=0,s=r.length;u<s;u++){var w=r[u].data("dropkick"),t=w.$dk,v=t.find("li").first();t.find(".dk_label").text(w.label);t.find(".dk_options_inner").animate({scrollTop:0},0);m(v,t);g(v,t,true)}};b.fn.dropkick=function(s){if(!c){if(p[s]){return p[s].apply(this,Array.prototype.slice.call(arguments,1))}else{if(typeof s==="object"||!s){return p.init.apply(this,arguments)}}}};function o(z,u){var s=z.keyCode,v=u.data("dropkick"),C=u.find(".dk_options"),y=u.hasClass("dk_open"),A=u.find(".dk_option_current"),x=C.find("li").first(),B=C.find("li").last(),w,t;switch(s){case n.enter:if(y){g(A.find("a"),u);k(u)}else{q(u)}z.preventDefault();break;case n.up:t=A.prev("li");if(y){if(t.length){m(t,u)}else{m(B,u)}}else{q(u)}z.preventDefault();break;case n.down:if(y){w=A.next("li").first();if(w.length){m(w,u)}else{m(x,u)}}else{q(u)}z.preventDefault();break;default:break}}function g(u,t,v){var x,s,w;x=u.attr("data-dk-dropdown-value");s=u.text();w=t.data("dropkick");$select=w.$select;$select.val(x);t.find(".dk_label").text(s);v=v||false;if(!v){w.settings.change.call($select,x,s)}}function m(t,s){s.find(".dk_option_current").removeClass("dk_option_current");t.addClass("dk_option_current");j(s,t)}function j(u,t){var s=t.prevAll("li").outerHeight()*t.prevAll("li").length;u.find(".dk_options_inner").animate({scrollTop:s+"px"},0)}function k(s){s.removeClass("dk_open")}function q(s){var t=s.data("dropkick");s.find(".dk_options").css({top:s.find(".dk_toggle").outerHeight()-1});s.toggleClass("dk_open")}function a(x,z){var A=x,B=[],u;A=A.replace("{{ id }}",z.id);A=A.replace("{{ label }}",z.label);A=A.replace("{{ tabindex }}",z.tabindex);if(z.options&&z.options.length){for(var v=0,t=z.options.length;v<t;v++){var s=b(z.options[v]),y="dk_option_current",w=h;w=w.replace("{{ value }}",s.val());w=w.replace("{{ current }}",(d(s.val())===z.value)?y:"");w=w.replace("{{ text }}",s.text());B[B.length]=w}}u=b(A);u.find(".dk_options_inner").html(B.join(""));z.settings.onRender.call(u);return u}function d(s){return(b.trim(s).length>0)?s:false}b(function(){b(".dk_toggle").live("click",function(t){var s=b(this).parents(".dk_container").first();q(s);if("ontouchstart" in f){s.addClass("dk_touch");s.find(".dk_options_inner").addClass("scrollable vertical")}t.preventDefault();return false});b(".dk_options a").live((b.browser.msie?"mousedown":"click"),function(v){var u=b(this),s=u.parents(".dk_container").first(),t=s.data("dropkick");k(s);g(u,s);m(u.parent(),s);v.preventDefault();return false});b(l).bind("keydown.dk_nav",function(u){var v=b(".dk_container.dk_open"),t=b(".dk_container.dk_focus"),s=null;if(v.length){s=v}else{if(t.length&&!v.length){s=t}}if(s){o(u,s)}})})})(jQuery,window,document);